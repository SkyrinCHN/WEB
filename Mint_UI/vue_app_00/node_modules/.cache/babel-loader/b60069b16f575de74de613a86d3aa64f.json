{"remainingRequest":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/babel-loader/lib/index.js!/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/src/components/sub/comment.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/src/components/sub/comment.vue","mtime":1546413820546},{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/cache-loader/dist/cjs.js","mtime":1534853416000},{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      msg: \"\",\n      list: [],\n      pageIndex: 0,\n      pageSize: \"7\",\n      pageCount: 1\n    };\n  },\n  props: [\"id\"],\n  created: function created() {\n    // console.log(this.id);\n    this.getMore();\n  },\n  methods: {\n    getMore: function getMore() {\n      var _this = this;\n\n      this.pageIndex++;\n      var nid = this.id;\n      var pno = this.pageIndex;\n      var ps = this.pageSize;\n      var url = \"http://localhost:3000/getComments?pno=\" + pno + \"&pageSize=\" + ps + \"&nid=\" + nid;\n      this.axios.get(url).then(function (result) {\n        //  var output = result.data.data;\n        //  console.log(result);\n        var rows = _this.list.concat(result.data.data);\n\n        _this.list = rows; // console.log(this.list.content);\n        //  if(this.list.content=null){\n        //    this.list.content=\"还没有人发表评论\";\n        //  }\n      });\n    },\n    addComment: function addComment() {\n      var _this2 = this;\n\n      //获取新闻编号 评论内容\n      var content = this.msg;\n      var nid = this.id;\n\n      if (!content.trim().length == 0) {\n        var url = \"http://127.0.0.1:3000/addComment?nid=\" + nid + \"&content=\" + content; //接收返回数据\n\n        this.axios.get(url).then(function (result) {\n          var output = result.data;\n\n          if (output.code == \"1\") {\n            Toast(result.data.msg); //提示用户toast 清空评论框\n\n            _this2.msg = \"\";\n            _this2.list = [];\n            _this2.pageIndex = 0;\n\n            _this2.getMore();\n          } else {\n            Toast(result.data.msg);\n          }\n        });\n      } else {\n        Toast(\"好歹整两句嘛\");\n      }\n    }\n  }\n};",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AAAA,WAAA,EAAA;AAAA,YAAA,EAAA;AAAA,iBAAA,CAAA;AAAA,gBAAA,GAAA;AAAA,iBAAA;AAAA,KAAA;AACA,GAHA;AAIA,SAAA,CAAA,IAAA,CAJA;AAKA,SALA,qBAKA;AACA;AACA,SAAA,OAAA;AACA,GARA;AASA,WAAA;AACA,WADA,qBACA;AAAA;;AACA,WAAA,SAAA;AACA,UAAA,MAAA,KAAA,EAAA;AACA,UAAA,MAAA,KAAA,SAAA;AACA,UAAA,KAAA,KAAA,QAAA;AACA,UAAA,MACA,2CACA,GADA,GAEA,YAFA,GAGA,EAHA,GAIA,OAJA,GAKA,GANA;AAOA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,kBAAA;AACA;AACA;AACA,YAAA,OAAA,MAAA,IAAA,CAAA,MAAA,CAAA,OAAA,IAAA,CAAA,IAAA,CAAA;;AACA,cAAA,IAAA,GAAA,IAAA,CAJA,CAKA;AACA;AACA;AACA;AACA,OATA;AAUA,KAvBA;AAwBA,cAxBA,wBAwBA;AAAA;;AACA;AACA,UAAA,UAAA,KAAA,GAAA;AACA,UAAA,MAAA,KAAA,EAAA;;AACA,UAAA,CAAA,QAAA,IAAA,GAAA,MAAA,IAAA,CAAA,EAAA;AACA,YAAA,MACA,0CAAA,GAAA,GAAA,WAAA,GAAA,OADA,CADA,CAGA;;AACA,aAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,kBAAA;AACA,cAAA,SAAA,OAAA,IAAA;;AACA,cAAA,OAAA,IAAA,IAAA,GAAA,EAAA;AACA,kBAAA,OAAA,IAAA,CAAA,GAAA,EADA,CAEA;;AACA,mBAAA,GAAA,GAAA,EAAA;AACA,mBAAA,IAAA,GAAA,EAAA;AACA,mBAAA,SAAA,GAAA,CAAA;;AACA,mBAAA,OAAA;AACA,WAPA,MAOA;AACA,kBAAA,OAAA,IAAA,CAAA,GAAA;AACA;AACA,SAZA;AAaA,OAjBA,MAiBA;AACA,cAAA,QAAA;AACA;AACA;AAhDA;AATA,CAAA","sourcesContent":["<template>\n  <div class=\"comment\">\n    <h5>发表评论</h5>\n    <textarea\n      name=\"commentTxt\"\n      id=\"comment\"\n      cols=\"20\"\n      rows=\"8\"\n      placeholder=\"吐糟100个字,不能再多了\"\n      maxlength=\"100\"\n      v-model=\"msg\"\n    ></textarea>\n    <!-- <button>提交</button> -->\n    <mt-button size=\"large\" type=\"primary\" @click=\"addComment\">提交</mt-button>\n    <hr>\n    <div class=\"cmt-list\">\n      <div class=\"ctm-item\" v-for=\"(l,i) in list\">\n        第{{i+1}}楼:发表时间{{l.ctime|datetimeFilter}}\n        <div class=\"ctm-body\">{{l.content}}</div>\n        <hr>\n      </div>\n    </div>\n    <mt-button size=\"large\" type=\"danger\" icon=\"more\" @click=\"getMore()\">加载更多</mt-button>\n  </div>\n</template>\n<script>\nimport { Toast } from \"mint-ui\";\nexport default {\n  data() {\n    return { msg: \"\", list: [], pageIndex: 0, pageSize: \"7\", pageCount: 1 };\n  },\n  props: [\"id\"],\n  created() {\n    // console.log(this.id);\n    this.getMore();\n  },\n  methods: {\n    getMore() {\n      this.pageIndex++;\n      var nid = this.id;\n      var pno = this.pageIndex;\n      var ps = this.pageSize;\n      var url =\n        \"http://localhost:3000/getComments?pno=\" +\n        pno +\n        \"&pageSize=\" +\n        ps +\n        \"&nid=\" +\n        nid;\n      this.axios.get(url).then(result => {\n        //  var output = result.data.data;\n        //  console.log(result);\n        var rows = this.list.concat(result.data.data);\n        this.list = rows;\n        // console.log(this.list.content);\n        //  if(this.list.content=null){\n        //    this.list.content=\"还没有人发表评论\";\n        //  }\n      });\n    },\n    addComment() {\n      //获取新闻编号 评论内容\n      var content = this.msg;\n      var nid = this.id;\n      if (!content.trim().length == 0) {\n        var url =\n          \"http://127.0.0.1:3000/addComment?nid=\" + nid + \"&content=\" + content;\n        //接收返回数据\n        this.axios.get(url).then(result => {\n          var output = result.data;\n          if (output.code == \"1\") {\n            Toast(result.data.msg);\n            //提示用户toast 清空评论框\n            this.msg = \"\";\n            this.list=[];\n            this.pageIndex = 0;\n            this.getMore();\n          } else {\n            Toast(result.data.msg);\n          }\n        });\n      } else {\n        Toast(\"好歹整两句嘛\");\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.comment div.cmt-list {\n  font-size: 10px;\n  margin: 5px;\n}\n.comment div.cmt-list div.cmt-item {\n  border: 1px solid #aaa;\n  margin-top: 15px;\n  /* font-size: 10px; */\n}\ntextarea {\n  font-size: 13px;\n  height: 150px;\n  border-radius: 5px;\n}\n</style>\n"],"sourceRoot":"src/components/sub"}]}