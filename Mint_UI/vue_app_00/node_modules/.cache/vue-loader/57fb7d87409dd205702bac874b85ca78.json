{"remainingRequest":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/src/components/sub/comment.vue?vue&type=style&index=0&id=0a7c30a0&scoped=true&lang=css","dependencies":[{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/src/components/sub/comment.vue","mtime":1546413820546},{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1521907988000},{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/cache-loader/dist/cjs.js","mtime":1534853416000},{"path":"/Users/liuhai/Desktop/WEB/Mint_UI/vue_app_00/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.comment div.cmt-list {\n  font-size: 10px;\n  margin: 5px;\n}\n.comment div.cmt-list div.cmt-item {\n  border: 1px solid #aaa;\n  margin-top: 15px;\n  /* font-size: 10px; */\n}\ntextarea {\n  font-size: 13px;\n  height: 150px;\n  border-radius: 5px;\n}\n",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comment.vue","sourceRoot":"src/components/sub","sourcesContent":["<template>\n  <div class=\"comment\">\n    <h5>发表评论</h5>\n    <textarea\n      name=\"commentTxt\"\n      id=\"comment\"\n      cols=\"20\"\n      rows=\"8\"\n      placeholder=\"吐糟100个字,不能再多了\"\n      maxlength=\"100\"\n      v-model=\"msg\"\n    ></textarea>\n    <!-- <button>提交</button> -->\n    <mt-button size=\"large\" type=\"primary\" @click=\"addComment\">提交</mt-button>\n    <hr>\n    <div class=\"cmt-list\">\n      <div class=\"ctm-item\" v-for=\"(l,i) in list\">\n        第{{i+1}}楼:发表时间{{l.ctime|datetimeFilter}}\n        <div class=\"ctm-body\">{{l.content}}</div>\n        <hr>\n      </div>\n    </div>\n    <mt-button size=\"large\" type=\"danger\" icon=\"more\" @click=\"getMore()\">加载更多</mt-button>\n  </div>\n</template>\n<script>\nimport { Toast } from \"mint-ui\";\nexport default {\n  data() {\n    return { msg: \"\", list: [], pageIndex: 0, pageSize: \"7\", pageCount: 1 };\n  },\n  props: [\"id\"],\n  created() {\n    // console.log(this.id);\n    this.getMore();\n  },\n  methods: {\n    getMore() {\n      this.pageIndex++;\n      var nid = this.id;\n      var pno = this.pageIndex;\n      var ps = this.pageSize;\n      var url =\n        \"http://localhost:3000/getComments?pno=\" +\n        pno +\n        \"&pageSize=\" +\n        ps +\n        \"&nid=\" +\n        nid;\n      this.axios.get(url).then(result => {\n        //  var output = result.data.data;\n        //  console.log(result);\n        var rows = this.list.concat(result.data.data);\n        this.list = rows;\n        // console.log(this.list.content);\n        //  if(this.list.content=null){\n        //    this.list.content=\"还没有人发表评论\";\n        //  }\n      });\n    },\n    addComment() {\n      //获取新闻编号 评论内容\n      var content = this.msg;\n      var nid = this.id;\n      if (!content.trim().length == 0) {\n        var url =\n          \"http://127.0.0.1:3000/addComment?nid=\" + nid + \"&content=\" + content;\n        //接收返回数据\n        this.axios.get(url).then(result => {\n          var output = result.data;\n          if (output.code == \"1\") {\n            Toast(result.data.msg);\n            //提示用户toast 清空评论框\n            this.msg = \"\";\n            this.list=[];\n            this.pageIndex = 0;\n            this.getMore();\n          } else {\n            Toast(result.data.msg);\n          }\n        });\n      } else {\n        Toast(\"好歹整两句嘛\");\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.comment div.cmt-list {\n  font-size: 10px;\n  margin: 5px;\n}\n.comment div.cmt-list div.cmt-item {\n  border: 1px solid #aaa;\n  margin-top: 15px;\n  /* font-size: 10px; */\n}\ntextarea {\n  font-size: 13px;\n  height: 150px;\n  border-radius: 5px;\n}\n</style>\n"]}]}