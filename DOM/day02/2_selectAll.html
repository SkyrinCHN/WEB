<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>全选和取消全选</title>
  </head>
  <body>
    <h2>管理员列表</h2>
    <table border="1px" width="500px">
      <thead>
        <tr>
          <th>
            <input id="all" type="checkbox" /><label for="all">全选</label>
          </th>
          <th>管理员ID</th>
          <th>姓名</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="checkbox" /></td>
          <td>1</td>
          <td>Tester</td>
          <td>修改 删除</td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>2</td>
          <td>Manager</td>
          <td>修改 删除</td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>3</td>
          <td>Analyst</td>
          <td>修改 删除</td>
        </tr>
        <tr>
          <td><input type="checkbox" /></td>
          <td>4</td>
          <td>Admin</td>
          <td>修改 删除</td>
        </tr>
      </tbody>
    </table>
    <button>删除选定</button>
    <script>
      var checkAll = document.querySelector(
        "table>thead>tr>th:first-child>input"
      );
      checkAll.onclick = function() {
        var checks = document.querySelectorAll("table>tbody>tr>td>input");
        console.log(checks);
        for (var everyone of checks) {
          everyone.checked = this.checked;
        }
      };
      var checks = document.querySelectorAll("table>tbody>tr>td>input");
      for (var check of checks) {
        check.onclick = function() {
          //声明一个全选中的局部变量,别用全局变量
          var checkAll = document.querySelector(
            "table>thead>tr>th:first-child>input"
          );
          //如果当前未选中 全选框一定是未选中
          if (!this.checked) {
            checkAll.checked = false;
          } else {
            //否则
            //查找其他单选框是否有未选中的
            var uncheck = document.querySelector(
              "table>tbody>tr>td>input:not(:checked)"
            );
            if (uncheck != null) {
              //如果有
              //  全选框一定未选中
              checkAll.checked = false;
            } else {
              //  否则
              //  全选框一定选中了
              checkAll.checked = true;
            }
          }
        };
      }
    </script>
  </body>
</html>
